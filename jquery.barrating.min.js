(function(b){var a={init:function(f){var e={showValues:false,showSelectedRating:true},d="ontouchstart" in window,c=d?"touchstart":"click";f=b.extend(e,f);return this.each(function(){var j=b(this),i=j.data("barrating"),k,h,g;j.data("barrating",{initialized:true,currentRating:j.val()});if(!i||i.initialized===false){k=b("<div />",{"class":"bar-rating"}).insertAfter(this);b(this).find("option").each(function(){var o,m,n,l;o=b(this).text();m=(f.showValues)?o:"";n=b("<a />",{href:"#","data-rating":o});l=b("<span />",{text:m});k.append(n.append(l))});if(f.showSelectedRating){k.append(b("<div />",{text:"","class":"current-rating"}));k.find(".current-rating").on("ratingchange",function(){b(this).text(j.data("barrating").currentRating)}).trigger("ratingchange")}g=function(){if(j.data("barrating").currentRating!==undefined){k.find('a[data-rating="'+j.data("barrating").currentRating+'"]').addClass("selected current").prevAll().addClass("selected")}};g();h=k.find("a");if(d){h.on("click",function(l){l.preventDefault()})}h.on(c,function(l){var m=b(this);l.preventDefault();h.removeClass("active selected current");m.addClass("selected current").prevAll().addClass("selected");j.data("barrating").currentRating=m.attr("data-rating");j.val(m.attr("data-rating"));k.find(".current-rating").trigger("ratingchange");return false});if(!d){h.on({mouseenter:function(){var l=b(this);h.removeClass("active").removeClass("selected");l.addClass("active").prevAll().addClass("active")}});k.on({mouseleave:function(){h.removeClass("active");g()}})}j.hide()}})},destroy:function(){return this.each(function(){var c=b(this);c.removeData("barrating");b(".bar-rating, .bar-rating a").off().remove();c.show()})}};b.fn.barrating=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.barrating")}}}})(jQuery);