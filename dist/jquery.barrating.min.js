!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=function(){function e(){var e=this,n=function(){var n=[e.options.wrapperClass];""!==e.options.theme&&n.push("br-theme-"+e.options.theme),e.$elem.wrap(t("<div />",{"class":n.join(" ")}))},i=function(){e.$elem.unwrap()},a=function(){var n;return n=e.options.initialRating?t('option[value="'+e.options.initialRating+'"]',e.$elem):t("option:selected",e.$elem)},r=function(t){var n=e.$elem.data("barrating");return"undefined"!=typeof t?n[t]:n},o=function(t,n){null!==n&&"object"==typeof n?e.$elem.data("barrating",n):e.$elem.data("barrating")[t]=n},s=function(){var t=a();o(null,{userOptions:e.options,ratingValue:t.val(),ratingText:t.data("html")?t.data("html"):t.text(),originalRatingValue:t.val(),originalRatingText:t.data("html")?t.data("html"):t.text()}),o("deselectable",e.$elem.find("option:first").val()?!1:!0)},l=function(){e.$elem.removeData("barrating")},u=function(){return r("ratingText")},c=function(){return r("ratingValue")},d=function(){return r("deselectable")},f=function(){var n=t("<div />",{"class":"br-widget"});return e.$elem.find("option").each(function(){var i,a,r,o,s;i=t(this).val(),i&&(a=t(this).text(),r=t(this).data("html"),r&&(a=r),o=t("<a />",{href:"#","data-rating-value":i,"data-rating-text":a}),s=t("<span />",{html:e.options.showValues?a:""}),n.append(o.append(s)))}),e.options.showSelectedRating&&n.append(t("<div />",{text:"","class":"br-current-rating"})),e.options.reverse&&n.addClass("br-reverse"),e.options.readonly&&n.addClass("br-readonly"),n},p=function(){return e.options.reverse?"nextAll":"prevAll"},h=function(t){e.$elem.find('option[value="'+t+'"]').prop("selected",!0),e.$elem.change()},g=function(t){t=t?t:u(),e.options.showSelectedRating&&e.$elem.parent().find(".br-current-rating").text(t)},v=function(t){t.find("a").removeClass("br-selected br-current"),t.find('a[data-rating-value="'+c()+'"]').addClass("br-selected br-current")[p()]().addClass("br-selected")},m=function(n){n.on("click",function(i){var a,r,s=t(this);return i.preventDefault(),n.removeClass("br-active br-selected"),s.addClass("br-selected")[p()]().addClass("br-selected"),a=s.attr("data-rating-value"),r=s.attr("data-rating-text"),s.hasClass("br-current")&&d()?(s.removeClass("br-selected br-current")[p()]().removeClass("br-selected br-current"),a="",r=""):(n.removeClass("br-current"),s.addClass("br-current")),o("ratingValue",a),o("ratingText",r),h(a),g(r),e.options.onSelect.call(e,c(),u(),i),!1})},b=function(e){e.on({mouseenter:function(){var n=t(this);e.removeClass("br-active br-selected"),n.addClass("br-active")[p()]().addClass("br-active"),g(n.attr("data-rating-text"))}})},w=function(t){e.$widget.on({mouseleave:function(){t.removeClass("br-active"),g(),v(e.$widget)}})},$=function(e){e.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).click()})},C=function(t){t.on("click",function(t){t.preventDefault()})};this.show=function(){var t;r()||(n(),s(),e.$widget=f(),e.$widget.insertAfter(e.$elem),v(e.$widget),g(),t=e.$widget.find("a"),e.options.fastClicks&&$(t),e.options.readonly?C(t):(m(t),e.options.hoverState&&(b(t),w(t))),e.$elem.hide())},this.set=function(t){var e=r("userOptions");this.$elem.find('option[value="'+t+'"]').val()&&(o("ratingValue",t),o("ratingText",this.$elem.find('option[value="'+t+'"]').text()),h(c()),g(u()),v(this.$widget),e.onSelect.call(this,c(),u()))},this.clear=function(){var t=r("userOptions");o("ratingValue",r("originalRatingValue")),o("ratingText",r("originalRatingText")),h(c()),g(u()),v(this.$widget),t.onClear.call(this,c(),u())},this.destroy=function(){var t=c(),e=u(),n=r("userOptions");this.$widget.off().remove(),l(),i(),this.$elem.show(),n.onDestroy.call(this,t,e)}}return e.prototype.init=function(e,n){return this.$elem=t(n),this.options=t.extend({},t.fn.barrating.defaults,e),this.options},e}();t.fn.barrating=function(n,i){return this.each(function(){var a=new e;if(t(this).is("select")||t.error("Sorry, this plugin only works with select fields."),a.hasOwnProperty(n)){if(a.init(i,this),"show"===n)return a.show(i);if(a.$elem.data("barrating"))return a.$widget=t(this).next(".br-widget"),a[n](i)}else{if("object"==typeof n||!n)return i=n,a.init(i,this),a.show();t.error("Method "+n+" does not exist on jQuery.barrating")}})},t.fn.barrating.defaults={theme:"",initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,wrapperClass:"br-wrapper",onSelect:function(t,e,n){},onClear:function(t,e){},onDestroy:function(t,e){}},t.fn.barrating.BarRating=e});
//# sourceMappingURL=jquery.barrating.min.js.map